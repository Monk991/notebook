## [Pinia](https://pinia.vuejs.org/getting-started.html)

### 安装

```bash
PS C:\Users\Monk\Documents\reborn\blog\workspace\blog-frontend> yarn add pinia
yarn add v1.22.19
warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
success Saved 1 new dependency.
info Direct dependencies
└─ pinia@2.1.6
info All dependencies
└─ pinia@2.1.6
Done in 21.67s.
```

- /src/store/index.ts

```ts
import { createPinia } from 'pinia'

const store = createPinia()

export default store
```

- /src/main.ts

```ts
// ...
import store from './store'
// ...
app.use(store)
// ...
```

### 验证

- /src/store/user.ts

```ts
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => {
    return {
      age: 18
    }
  },
  getters: {
    doubleAge: (state) => {
      return state.age * 2
    }
  }
})
```

- /src/views/sys/role/index.vue

```vue
<template>
  <div>Role</div>
  {{ userStore.age }}
  {{ userStore.doubleAge }}
  <el-button @click="plusAge">+1</el-button>
</template>

<script setup lang="ts">
import { useUserStore } from '../../../store/user'

const userStore = useUserStore()

function plusAge() {
  userStore.age++
}
</script>
```

- /src/views/sys/user/index.vue

```vue
<template>
  <div>User</div>
  {{ userStore.age }}
  {{ userStore.doubleAge }}
</template>

<script setup lang="ts">
import { useUserStore } from '../../../store/user'

const userStore = useUserStore()
</script>
```
