## [PiniaPluginPersistedstate](https://prazdevs.github.io/pinia-plugin-persistedstate/guide/)

## 安装

```bash
PS C:\Users\Monk\Documents\reborn\blog\workspace\blog-frontend> yarn add pinia-plugin-persistedstate
yarn add v1.22.19
warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
[4/4] Building fresh packages...

success Saved lockfile.
success Saved 1 new dependency.
info Direct dependencies
└─ pinia-plugin-persistedstate@3.2.0
info All dependencies
└─ pinia-plugin-persistedstate@3.2.0
Done in 2.13s.
```

- /src/store/index.ts

```ts
import { createPinia } from 'pinia'
import { createPersistedState } from 'pinia-plugin-persistedstate'

const store = createPinia()

const persistedState = createPersistedState({
  key: (id) => `blog_${id}`
})

store.use(persistedState)

export default store
```

### 验证

- /src/store/user.ts

```ts
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => {
    return {
      age: 18,
      name: 'monk'
    }
  },
  getters: {
    doubleAge: (state) => {
      return state.age * 2
    }
  },
  persist: [
    {
      paths: ['age'],
      storage: sessionStorage
    }
  ]
})
```
